# Library Book Tracking Application

This application allows two libraries to track their books and loan them to their registered users. The books can be marked as either available or loaned to a member, making them unavailable to other users.

The only tests I have included are the ones automatically generated by Laravel. Normally I would start by creating a suite of tests to drive development, but I was unsure how much detail you wanted me to go into, and I favoured working on the logic & coding to demonstrate my abilities.

## Features

- Database models and migrations (with indexing and constraints where appropriate)
- Relationships between data models
- Routing (both web and API based)
- Request validation
- Security (users can only borrow a book belonging to their library)
- API endpoint to retrieve all books with usage of `JsonResource`
- Scalability

I needed clarification on what was meant by "Centralisation of logic where applicable (e.g. ISBN assignment)"

There is no front end, other than what is provided by Laravel by default, as per the brief.

## Installation

1. Clone the repository: `git clone https://github.com/jason-rudland/ascend.git`
2. Run database migrations: `php artisan migrate --seed`

## Usage

### Web Routes

#### Books
| Verb   | URI                    | Action                                           | Route Name         |
|--------|------------------------|-------------------------------------------------|---------------------|
| GET/HEAD | books                | BookController@index                             | books.index         |
| POST     | books                | BookController@store                             | books.store         |
| GET/HEAD | books/create         | BookController@create                            | books.create        |
| GET/HEAD | books/{book}         | BookController@show                              | books.show          |
| PUT/PATCH | books/{book}         | BookController@update                            | books.update        |
| DELETE   | books/{book}         | BookController@destroy                           | books.destroy       |
| GET/HEAD | books/{book}/edit    | BookController@edit                              | books.edit          |

#### Libraries
| Method | URI                     | Name                | Action                            |
|--------|-------------------------|---------------------|------------------------------------|
| GET\|HEAD | libraries | libraries.index | LibraryController@index |
| POST | libraries | libraries.store | LibraryController@store |
| GET\|HEAD | libraries/create | libraries.create | LibraryController@create |
| GET\|HEAD | libraries/{library} | libraries.show | LibraryController@show |
| PUT\|PATCH | libraries/{library} | libraries.update | LibraryController@update |
| DELETE | libraries/{library} | libraries.destroy | LibraryController@destroy |
| GET\|HEAD | libraries/{library}/edit | libraries.edit | LibraryController@edit |


### API Routes

#### Book
| Method   | URI                   | Action                  |
| -------- | --------------------- | ------------------------ |
| GET\|HEAD  | api/books          | BookController@index   |
| POST     | api/books          | BookController@store   |
| GET\|HEAD  | api/books/{id}     | BookController@show    |
| PUT      | api/books/{id}     | BookController@update  |
| DELETE   | api/books/{id}     | BookController@destroy |


## Request Validation
Requests are validated in here:
- StoreBookRequest
- StoreLibraryRequest
- StoreLoanRequest
- UpdateBookRequest
- Update LibraryRequest
- UpdateLoanRequest

## Security

- Users can only borrow books from their associated library.
- Users cannot borrow books that are already out with another user.
- Users cannot borrow books that are not available in their library.

## Scalability

The application has built in scalability to allow a user to join as many libaraies as are in the Library table, by the use of a pivot table.
